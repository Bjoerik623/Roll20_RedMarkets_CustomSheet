<div class="main">
	  <div class="logo"></div>
</div>






<script type="text/worker">

const int = score => parseInt(score, 10) || 0;

// Auto-calculates & updates 'Stat Bonus' based on changes to corresponding 'Base Stat',
// according to the table on page 5 of the Rulebook.
// If the Base stat is less than 1, the sheet sets the bonus to "-2"

const stats = ["strength", "intelligence", "charm", "arcana", "grace"];
stats.forEach(stat => {
    on(`change:${stat}`, () => {
        getAttrs([stat], values => {
            const stat_base = int(values[stat]);
            console.log(stat_base);
            let stat_bonus = 0;
            if (stat_base >= 17) stat_bonus = "+4";
            else if (stat_base >= 16) stat_bonus = "+3";
            else if (stat_base >= 13) stat_bonus = "+2";
            else if (stat_base >= 9) stat_bonus = "+1";
            else if (stat_base >= 7) stat_bonus = "0";
            else if (stat_base >= 5) stat_bonus = "-1";
            else if (stat_base >= 1) stat_bonus = "-2";
            else stat_bonus = "-2";
            
            setAttrs({
                [`${stat}_bonus`]: stat_bonus
            });
        });
    });
});

</script>